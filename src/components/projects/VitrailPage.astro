---
import type { Project } from '../../config/projects';
import { publicPath } from '../../config/projects';
import ProjectHeader from '../shared/ProjectHeader.astro';
import ProjectMenu from '../shared/ProjectMenu.astro';
import SectionHeading from '../shared/SectionHeading.astro';
import BackButton from '../shared/BackButton.astro';
import SkillTag from '../SkillTag.astro';

interface Props {
  project: Project;
}

const { project } = Astro.props;
---

<main class="container mx-auto px-4 md:px-8 py-8 md:py-12">
  <ProjectHeader title={project.title} year={project.year} inProgress={project.inProgress} />
  <ProjectMenu sections={['overview', 'technology', 'process', 'gallery']} />

  <div class="max-w-6xl mx-auto space-y-16 md:space-y-24">
    <!-- Overview Section -->
    <section id="overview" class="section-content scroll-mt-32">
      <div class="space-y-10 md:space-y-16">
        <div class="flex flex-col md:flex-row gap-6 md:gap-12 items-center">
          <div class="w-full md:w-1/2">
            <img src={project.image} alt={project.title} class="rounded-2xl w-full" />
          </div>
          <div class="w-full md:w-1/2">
            <p class="text-base md:text-lg text-gray-300 leading-relaxed">
              {project.description}
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Technology Section -->
    <section id="technology" class="section-content scroll-mt-32">
      <SectionHeading>Technology</SectionHeading>
      <div class="flex flex-wrap gap-3 mb-8 md:mb-12">
        {project.skills.map((skill) => (
          <SkillTag name={skill.name} category={skill.category} />
        ))}
      </div>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6">
        <div class="space-y-2">
          <img
            src={publicPath('Vitrail/kab230-removebg-preview.webp')}
            alt="Dayton Audio KAB-230v4"
            class="rounded-2xl w-full brightness-80"
          />
          <p class="text-sm text-gray-400 text-center">
            Dayton Audio KAB-230v4 2 x 30W Class D Audio Amplifier Board with aptX HD Bluetooth 5.0
          </p>
        </div>
        <div class="space-y-2">
          <img
            src={publicPath('Vitrail/bms-removebg-preview.webp')}
            alt="Dayton Audio KAB-BE"
            class="rounded-2xl w-full brightness-80"
          />
          <p class="text-sm text-gray-400 text-center">
            Dayton Audio KAB-BE 18650 Battery Extension Board
          </p>
        </div>
        <div class="space-y-2">
          <img
            src={publicPath('Vitrail/rs100-removebg-preview.webp')}
            alt="Dayton Audio RS100-4"
            class="rounded-2xl w-full brightness-80"
          />
          <p class="text-sm text-gray-400 text-center">
            Dayton Audio RS100-4 4" Reference Full-Range Driver 4 Ohm
          </p>
        </div>
      </div>
    </section>

    <!-- Process Section -->
    <section id="process" class="section-content scroll-mt-32">
      <SectionHeading>Process</SectionHeading>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6 mb-4 md:mb-6">
        <div class="space-y-2">
          <img
            src={publicPath('Vitrail/gluing.webp')}
            alt="Enclosure assembly gluing process"
            class="rounded-2xl w-full h-64 md:h-[400px] object-cover"
          />
          <p class="text-sm text-gray-400 text-center">
            Enclosure assembly gluing process
          </p>
        </div>
        <div class="space-y-2">
          <img
            src={publicPath('Vitrail/before_oil.webp')}
            alt="All enclosure parts prepared for surface finishing"
            class="rounded-2xl w-full h-64 md:h-[400px] object-cover"
          />
          <p class="text-sm text-gray-400 text-center">
            All enclosure parts prepared for surface finishing with a high-quality furniture oil.
          </p>
        </div>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6 mb-4 md:mb-6">
        <img
          src={publicPath('Vitrail/old_open.webp')}
          alt="Old open"
          class="rounded-2xl w-full"
        />
        <img
          src={publicPath('Vitrail/old_closed.webp')}
          alt="Old closed"
          class="rounded-2xl w-full"
        />
      </div>
      <p class="text-base md:text-lg text-gray-300 leading-relaxed mb-4 md:mb-6">
        Initially, I used these Dayton Audio ND105-4 4" Aluminum Cone Midbass Neo Driver 4 Ohm drivers, but later upgraded to the RS100 drivers and also made a new front baffle that was 1 mm thinner to make the grid sit more flush with the design.
      </p>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6 items-start">
        <div class="space-y-2">
          <img
            src={publicPath('Vitrail/newbaffle.webp')}
            alt="New front baffle"
            class="rounded-2xl w-full h-64 md:h-[400px] object-cover"
          />
          <p class="text-sm text-gray-400 text-center">
            New front baffle CNC machined from MDF.
          </p>
        </div>
        <div>
          <video
            src={publicPath('Vitrail/bafflecnc.mp4')}
            autoplay
            loop
            muted
            playsinline
            class="rounded-2xl w-full h-64 md:h-[400px] object-cover"
          ></video>
        </div>
      </div>
    </section>

    <!-- Gallery Section -->
    <section id="gallery" class="section-content scroll-mt-32">
      <SectionHeading>Gallery</SectionHeading>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
        <img
          src={publicPath('Vitrail/1.webp')}
          alt="Vitrail gallery image 1"
          class="rounded-2xl w-full"
        />
        <img
          src={publicPath('Vitrail/2.webp')}
          alt="Vitrail gallery image 2"
          class="rounded-2xl w-full"
        />
        <img
          src={publicPath('Vitrail/3.webp')}
          alt="Vitrail gallery image 3"
          class="rounded-2xl w-full"
        />
        <img
          src={publicPath('Vitrail/4.webp')}
          alt="Vitrail gallery image 4"
          class="rounded-2xl w-full"
        />
        <img
          src={publicPath('Vitrail/5.webp')}
          alt="Vitrail gallery image 5"
          class="rounded-2xl w-full"
        />
      </div>
    </section>

    <BackButton />
  </div>
</main>

