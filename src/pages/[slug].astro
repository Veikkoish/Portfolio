---
import Layout from '../layouts/Layout.astro';
import { projects } from '../config/projects';

// Project page components
import OmniframePage from '../components/projects/OmniframePage.astro';
import RoboChessPage from '../components/projects/RoboChessPage.astro';
import MemoryPlayerPage from '../components/projects/MemoryPlayerPage.astro';
import VitrailPage from '../components/projects/VitrailPage.astro';
import HeyMacPage from '../components/projects/HeyMacPage.astro';
import VerifyPage from '../components/projects/VerifyPage.astro';
import DaylightPage from '../components/projects/DaylightPage.astro';
import GoKartPage from '../components/projects/GoKartPage.astro';

export async function getStaticPaths() {
  return projects.map((project) => ({
    params: { slug: project.slug },
    props: { project },
  }));
}

const { project } = Astro.props;

// Mapping slugs to components
const pageComponents: Record<string, any> = {
  'omniframe': OmniframePage,
  'robochess': RoboChessPage,
  'memory-player': MemoryPlayerPage,
  'vitrail': VitrailPage,
  'hey-mac': HeyMacPage,
  'verify': VerifyPage,
  'daylight': DaylightPage,
  'go-kart-v2': GoKartPage,
};

const PageComponent = pageComponents[project.slug];
---

<Layout title={project.title}>
  <PageComponent project={project} />
</Layout>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const menuButtons = document.querySelectorAll('.menu-btn');

    menuButtons.forEach((button) => {
      button.addEventListener('click', () => {
        const sectionId = button.getAttribute('data-section');
        const section = document.getElementById(sectionId || '');

        // Update active button
        menuButtons.forEach((btn) => btn.classList.remove('active'));
        button.classList.add('active');

        // Scroll to section
        section?.scrollIntoView({ behavior: 'smooth', block: 'start' });
      });
    });
  });
</script>
